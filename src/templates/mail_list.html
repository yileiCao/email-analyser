{% extends 'base.html' %}

{% block content %}
    <h1>{% block title %} Search Emails {% endblock %}</h1>

    <form method="post">
        <div class="form-group">
            <label>Email_from</label>
            <input type="email" name="email_from"
                   placeholder="Email From" class="form-control"
                   value="{{ request['fr'] }}">
        </div>

        <div class="form-group">
            <label>Email_to</label>
            <input type="email" name="email_to"
                   placeholder="Email To" class="form-control"
                   value="{{ request['to'] }}">
        </div>

        <div class="form-group">
            <label>After</label>
            <input type="date" name="date_after"
                   placeholder="2023-11-01"
                   value="{{ request['af'] }}">
        </div>

        <div class="form-group">
            <label>Before</label>
            <input type="date" name="date_before"
                   placeholder="2023-12-01"
                   value="{{ request['be'] }}">
        </div>

        <div class="form-group">
            <label>Keyword</label>
            <input type="checkbox" id="is_kw_semantic" name="is_kw_semantic" value="Tr">
            <label for="is_kw_semantic"> Semantic search</label>
            <input type="text" name="keyword"
                   placeholder="Keyword" class="form-control"
                   value="{{ request['ke'] }}">
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>

    <table id="myTable" border='5' class='table table-striped' style='border-collapse:separate'>
        <thead>
            <tr>
                <td>ID</td>
                <td>Sender</td>
                <td>Recipient</td>
                <td>Time</td>
                <td>Subject</td>
                <td>Keyword</td>
            </tr>
        </thead>
        <tbody>
        {% for mail in emails %}
            <tr>
                <td><a href="{{ url_for('view_mail', mail_id=mail['id']) }}">{{mail['id']}}</a></td>
                <td>{{mail['email_address']}}</td>
                <td>{{mail['email_address_1']}}</td>
                <td>{{mail['time']}}</td>
                <td>{{mail['subject']}}</td>
                <td>{{mail['keyword']}}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block scripts %}
  <script>
    $(document).ready(function () {
      $('#myTable').DataTable({
        columns: [
          {searchable: false},
          null,
          null,
          {searchable: false},
          {orderable: false},
          {orderable: false}],
      });
    });


  </script>
{% endblock %}